import java.util.Scanner;

 class Option {
    public void display() {
    System.out.println("Enter 1 for saving account");
    System.out.println("Enter 2 for current account");
    System.out.println("Enter 3 for check balance");
    System.out.println("Enter 0 to exit");
}

    public void saving_account_display() {
        System.out.println("Enter 1 for deposit");
        System.out.println("Enter 2 for withdraw");
        System.out.println("Enter 3 for calculate interest rate");
        System.out.println("Enter 4 for check balance");
    }

    public void current_account_display() {
        System.out.println("Enter 1 for deposit");
        System.out.println("Enter 2 for withdraw");
        System.out.println("Enter 3 for check balance");
    }
}

 class Account {
    private String account_number;
    private double balance;


    public String getAccount_number() {
        return account_number;
    }

    public Account(String account_number, double balance) {
        this.setAccount_number(account_number);
        this.setBalance(balance);
    }

    public void setAccount_number(String account_number) {
        this.account_number = account_number;
    }


    public double getBalance() {
        return balance;
    }

    public void setBalance(double balance) {
        if (balance > overdraft_limit) {
            this.balance = balance;
        } else {
            System.out.println("Enter valid number ");
        }
    }

    public void deposit(double amount) {
        if (amount > 0) {
            balance += amount;
            System.out.println("Deposit successful. New balance: " + balance);

        } else {
            System.out.println("Invalid deposit amount.");
        }
    }

    public void withdraw(double amount) {

        if (amount > 0 && balance >= amount) {
            balance = balance - amount;
            System.out.println("Withdrawal successful. New balance: " + balance);
        } else {
            System.out.println("Enter valid amount");
        }
    }

    public void check_balance() {
        System.out.println("Your current balance is : " + balance);
    }

}


class Saving_account extends Account{
    private double interest_rate ;
    public Saving_account(String account_number, double balance, double interest_rate) {
        super(account_number, balance);
        this.interest_rate = interest_rate;

    }

    public void calculate_interest_rate(double interest_rate){
        double interest = getBalance() * interest_rate;
        deposit(interest);
        System.out.println("Interest added. New balance: " + getBalance());
    }

    @Override
    public void deposit(double amount) {
        super.deposit(amount);
    }

    @Override
    public void withdraw(double amount) {
        super.withdraw(amount);
    }
}

 public class Current_account extends Account{
     private double overdraft_limit;

     public Current_account(String account_number, double balance, double overdraft_limit) {
        super(account_number, balance);
        this.overdraft_limit = overdraft_limit;
    }

     @Override
     public void withdraw(double amount) {
         double currentBalance = getBalance();

         // Check if the withdrawal would exceed the overdraft limit
         if (currentBalance - amount < -overdraft_limit) {
             System.out.println("Sorry, the transaction can't proceed as it exceeds the overdraft limit.");
         } else {
             // If within overdraft limit, subtract the amount and update the balance
             double newBalance = currentBalance - amount;
             setBalance(newBalance);
             System.out.println("Withdrawal successful. New balance: " + newBalance);
         }
     }

     @Override
     public void setBalance(double balance) {
         if(balance < -overdraft_limit){
             System.out.println("Insufficient funds. Exceeds overdraft limit.");
         }else{
            super.setBalance(balance);
         }
     }


     @Override
    public void deposit(double amount) {
        super.deposit(amount);
    }
}

public class Main {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        System.out.println("Setting your account initial details:");
        System.out.println("Enter your account number:");
        String account_number = sc.nextLine();

        System.out.println("Enter your initial balance:");
        double balance = sc.nextDouble();

        System.out.println("Enter your interest rate in decimal:");
        double interest_rate = sc.nextDouble();

        System.out.println("Enter your overdraft limit:");
        double overdraft_limit = sc.nextDouble();

        // Create account instances
        Saving_account saving_account = new Saving_account(account_number, balance, interest_rate);
        Current_account current_account = new Current_account(account_number, balance, overdraft_limit);

        Option option = new Option();
        boolean running = true;

        while (running) {
            option.display();
            int choice = sc.nextInt();

            switch (choice) {
                case 0:
                    running = false;
                    System.out.println("Exiting. Goodbye!");
                    break;

                case 1:
                    option.saving_account_display();
                    int operation = sc.nextInt();

                    if (operation == 1) {
                        System.out.println("Enter amount to deposit:");
                        double amount = sc.nextDouble();
                        saving_account.deposit(amount);
                    } else if (operation == 2) {
                        System.out.println("Enter amount to withdraw:");
                        double amount = sc.nextDouble();
                        saving_account.withdraw(amount);
                    } else if (operation == 3) {
                        saving_account.calculate_interest_rate(interest_rate);
                    } else if (operation == 4) {
                        saving_account.check_balance();
                    } else {
                        System.out.println("Invalid choice.");
                    }
                    break;

                case 2:
                    option.current_account_display();
                    int c_operation = sc.nextInt();

                    if (c_operation == 1) {
                        System.out.println("Enter amount to deposit:");
                        double c_deposit = sc.nextDouble();
                        current_account.deposit(c_deposit);
                    } else if (c_operation == 2) {
                        System.out.println("Enter amount to withdraw:");
                        double c_withdraw = sc.nextDouble();
                        current_account.withdraw(c_withdraw);
                    } else if (c_operation == 3) {
                        current_account.check_balance();
                    } else {
                        System.out.println("Invalid choice.");
                    }
                    break;

                case 3:
                    System.out.println("Checking overall balance...");
                    System.out.println("Saving Account Balance: " + saving_account.getBalance());
                    System.out.println("Current Account Balance: " + current_account.getBalance());
                    break;

                default:
                    System.out.println("Invalid choice.");
                    break;
            }
        }

        sc.close();
    }
}


